FROM node:14.13.0-alpine3.12
LABEL maintainer="Daniel Rataj <daniel.rataj@centrum.cz>"
LABEL org.opencontainers.image.source="https://github.com/whoopsmonitor/whoopsmonitor-alert-discord-webhook"
LABEL com.whoopsmonitor.documentation="https://github.com/whoopsmonitor/whoopsmonitor-alert-discord-webhook"
LABEL com.whoopsmonitor.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAErElEQVRoge2YXWwUVRiGn+/sD6YsJiAqIBQ1EbVV/i6AmABt/I2iGCUNphUoBWMgwVophgtwIjFAgYIYNIZCUdJeNCKicuFPIr1BikE0ERKjiaFYFUUwsjR2y87nxW67s92ZZne7S4juczXnO+c7877nzJw5c6BAgQIFCvyfkWySrDYNhsKUAw+LMkOFu1RYUF8tR9LJ39KsZaIcAH5AOS7Cp4Ewn61aJT2ZasnIwNYmnSg+alWpAkYDZ1A+xPBReDjtVoVE0uln504dFglRpjBf4AngFuACsB+b7auXyZmcGmhs0lG2sAFhORAATqqy6fJZ3ht+O6PlCnMEpgMlCsXAOCAIjIx3cRGIAL8IdKpyCuFkENovdPLniIk8rcpaYBrQK/CWEV55sVr+GrKBbXu1SmE7sRG/KEptj5/DgSiVwLNx4SadgXDBBk4g7I8YWgM2D4ryBjBa4Q+E2vpqac3awJYmfUwMH8eLn6vypggLgfnAsCxFe9EDHFJoNcIKVR4CUJt59cvksFeSpwHLUn9oAqcQJgHfAeeBshyL9uILlBsQJgPfF4coraiQqFtDv1cPoWIqgUnx4j15EDkY5Y6hvbPzEguBFreGgz279TkWNRTWeFW4GtjSrGVAad7kZIowuaFZZ7tVuRoQ5bn8Ksocn/K8WzzlJbbe1qJQgN+B4XlXlQEC3bafm+oXyWVnPGUGRgR4nGtMPIBCkYny6MB4igGFBVdHUuaopmpLMtDWpj7g/qumKHMesCxN0pxU+PkS00jsX9LhS1uYFgxzndhMB47lKaePUUXFTHUGkj5kUSjPYHv6bThEmWMHetJq07mhS3wV/4LmKicJo5QDX/eXnZVimJuuehXWDdw+WxUSUWF9LnNSkGSNyS+xJk/PoPjocAsPg6M5zRmAwBRnud9AY5OOIvZjMST+EXz5zFEo3tii/e9pYgYM92ZyU9PLLLe4KDNzmeOGL5LYXPYbsNN8ifpQ4VWrTYPOmNWmQYENucxxw2cntCZWIeW2TDoBpoTCtDfs1ZXdwumQUEqYXTDoTGaTk4JKQqtzGR2XmX4AZhk4EVJA85qThMDYvmvjiI51bX0Noo7BNo6ol4HTQFeeNblxLn7vVNTNAIzx6KgE5RDKfrKe9IxQhXcRDgIlri3E5RES2OzZpbAC4QrKHIGDgOsP9hCJAu/bhtkCiscPTFzPpsSlg23NWqfK1oFxB6fFpgrDeYXFwJPEzoWyOqIkNtonDHxwJco7fuFG29AicLdne6WuvkZ2uBoAaGzWR2xlD96rkg3sMz7W1y2Wrh279eZeH7MMzFS4Q+HW+CpRBFwfz/kb6Fb4VeAngR9t6AhEOVa7XM5t3q3jfX42oCzC+6ChC6hZvVQ+cQZdR25ji4709/CawFK8D7AiwAFbaFhTLd94tBmUhmadamxeRniK2FGkGz0ITb1B1q2tlIsDKwed+s27dbzx8YLAM7jskwS6xTCjbomcysZA4z4tVZvjGputgXQhtBrD63WLxXMVTOvZtSw1oQncJ1CuwgygRGAMysqXamRfNuL72LZHlyDsUviN2LLZgXIkfJajliX2UPouUKBAgQL/ff4FA2+KbGRpDxIAAAAASUVORK5CYII="
LABEL com.whoopsmonitor.env.WM_WEBHOOK_URL="Discord's incomming webhook URL"

WORKDIR /app
COPY ./src/index.js ./index.js
COPY ./src/package.json ./package.json
COPY ./src/package-lock.json ./package-lock.json

RUN npm install

CMD [ "npm", "start", "--silent" ]
